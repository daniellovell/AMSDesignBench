package analog.ota; import lib.motifs.*;

class OTA5T implements Amplifier {
  supply VDD=1.8V; ground GND;
  port in_p vinp, in_n vinn; port out vout; bias vbias_n;

  use {
    dp   = new DiffPairNMOS(vinp, vinn) { gnd=GND; tail=ntail; };
    tail = new TailCurrentSourcePMOS()   { out=ntail; gate=vbias_n; gnd=GND; };

    // Explicit mirror load: diode at 'sense' (n1), mirror current into vout only.
    pml = new PMOSMirrorActiveLoad(sense = dp.out_l, vdd = VDD) {
      taps = { vout:1 };
    };

    C(vout, GND, 1pF);
  }

  // Preserve node names for analysis tasks
  alias n1 = dp.out_l; alias n2 = dp.out_r;
}
